$(function(){$("#main").on("click",".admin-content .btn-group button",function(){$(this).addClass("active").siblings().removeClass("active")});var e=function(t){var a=location.hash.substr(1).split(","),e=location.search?".choose-interval a:first":".choose-interval a:eq(1)",n=a[1]||$("#tab-"+t).find(".choose-method a:first").attr("href").substr(1),i=a[2]||$("#tab-"+t).find(e).attr("href").substr(1);if($(this).closest(".invests-filter").length){var s=$(this).attr("href").substr(1);$(this).closest(".invests-filter").hasClass("choose-method")?n=s:i=s}var o=t+"-"+n+"-"+i,l=$("#template-"+o);l.length||(n="global",o=t+"-global-"+i,l=$("#template-"+o)),location.hash=t+","+n+","+i,$("#tab-"+t).find('.choose-method a[href="#'+n+'"]').closest("li").addClass("active").siblings().removeClass("active"),$("#tab-"+t).find('.choose-interval a[href="#'+i+'"]').addClass("active").siblings().removeClass("active");var r=$("#tab-"+t).find(".stats-charts");l.length?(r.html(l.html()),$(window).trigger("autocharts.init")):r.html("Template ["+o+"] not found!")};var a=location.hash,n=function(){a=location.hash,$('a[data-toggle="tab"]').on("show.bs.tab",function(t){var a=$(t.target).attr("href").substr(1);$("#tab-"+a).find(".invests-filter").find("a").on("click",function(t){t.preventDefault(),e.call(t.target,a)}),e(a)});var t=a.substr(1).split(",")||[];$("#tab-menu-"+t[0]).length?$("#tab-menu-"+t[0]).click():$('a[data-toggle="tab"]:first').click(),$(".admin-typeahead").on("typeahead:select",function(t,a,e){var n=(location.search&&location.search.substr(1)||"").split("&"),i=[];n.forEach(function(t){0!==t.indexOf(e)&&0!==t.indexOf("channel")&&0!==t.indexOf("call")&&0!==t.indexOf("user")&&0!==t.indexOf("project")&&0!==t.indexOf("matcher")&&0!==t.indexOf("consultant")&&0!==t.indexOf("text")&&0!==t.indexOf(a.id)&&i.push(t)});var s=location.pathname+"?"+(i?i.join("&")+"&":"")+e+"="+a.id+"&text="+a.name;adminProntoLoad(s)})};n(),$(window).on("pronto.render",function(t){location.hash=a,$('script[type="text/template"]').each(function(){var t=$(this),a=t.html(),e=$(a).data("source"),n=location.search.replace(/&text=[^&]+/,""),i=e.replace(/\?.*/g,"");i+=n,a=a.replace(new RegExp(e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),i),t.html(a)}),n()})});