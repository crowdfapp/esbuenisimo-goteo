$(function(){$(".autoform").on("click",".add-reward",function(e){e.preventDefault();var t=$(this).closest("form"),i=t.find(".reward-list"),n=t.serialize()+"&"+encodeURIComponent($(this).attr("name"))+"=";$but=$(this).hide(),i.find(">.text-danger").remove(),i.append('<div class="loading"></div>'),$.ajax({type:t.attr("method"),url:t.attr("action"),data:n}).done(function(e){var t=$(e);i.append(t.hide()),t.slideDown()}).fail(function(e){i.append('<p class="text-danger">'+e.responseText+"</p>")}).always(function(){$but.show(),i.find(">.loading").remove()})}),$("form.autoform").on("click",".remove-reward",function(e){if(e.isPropagationStopped())return!1;e.preventDefault();var t=$(this),i=t.closest("form"),n=(i.find(".reward-list"),i.serialize()+"&"+encodeURIComponent(t.attr("name"))+"="),a=t.closest(".panel");t.hide().after('<div class="loading"></div>'),a.find(":input").attr("disabled",!0),$.ajax({type:i.attr("method"),url:i.attr("action"),data:n}).done(function(){a.slideUp(function(){$(this).remove()})}).fail(function(e){console.log("An error occurred.",e),alert(e.responseText)}).always(function(){t.show().next(".loading").remove()})}),$("form.autoform").on("click",".reward-item .unlimited .material-switch",function(){var e=$(this).closest(".reward-item"),t=e.find('input[type="checkbox"]');if(!t.prop("disabled")){var i=e.find(".units");t.prop("checked")?i.addClass("out").removeClass("in"):(i.addClass("in").removeClass("out"),i.find('input[type="text"]').select())}}),$("form.autoform").on("change",".reward-item .units input",function(){$(this).closest(".reward-item").find(".material-switch").find('input[type="checkbox"]').prop("checked",0==$(this).val())})});