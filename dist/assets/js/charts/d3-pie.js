d3.goteo=d3.goteo||{},d3.goteo.pieChart=function(t){var d=t&&t.width||450,s=t&&t.height||300,u=t&&t.outerRadius||150,c=t&&t.innerRadius||15,r=d3.scaleOrdinal(d3.schemeCategory20c),f=function(t,e){var a=t.label||t.data.label;return"Other"==a||"Unknown"==a?"#BCBCBC":r(e)};return function(t){t.each(function(t){var e=d3.pie().value(function(t){return t.value}),a=0;t.forEach(function(t){a+=t.value});var r="0 0 "+d+" "+s,n=d3.select(this).append("svg").attr("viewBox",r).attr("preserveAspectRatio","xMinYMin meet"),i=d3.arc().innerRadius(c).outerRadius(u),l=n.selectAll("g.arc").data(e(t)).enter().append("g").attr("class","arc").attr("transform","translate("+u+", "+u+")");l.append("path").attr("fill",f).attr("d",i).on("mouseover",function(t){d3.select(this).attr("fill-opacity",".8").style("stroke","white").style("stroke-width","1px")}).on("mouseout",function(t){d3.select(this).attr("fill-opacity","1").style("stroke-width","0px")}).transition().duration(1e3).attrTween("d",function(t){var e=d3.interpolate({startAngle:0,endAngle:0},t);return function(t){return i(e(t))}}),l.append("svg:title").text(function(t){return t.data.label}),l.append("svg:text").attr("transform",function(t){var e=i.centroid(t);return"translate("+1.5*e[0]+","+1.5*e[1]+")"}).attr("text-anchor","middle").text(function(t,e){return 1<t.data.value/a*100?(t.data.value/a*100).toFixed(1)+"%":""}).attr("fill","#fff").classed("slice-label",!0);var o=n.append("g").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","end").selectAll("g").data(t).enter().append("g").attr("transform",function(t,e){return"translate(0,"+20*e+")"});o.append("rect").attr("x",d-19).attr("width",19).attr("height",19).attr("fill",f),o.append("text").attr("x",d-24).attr("y",9.5).attr("dy","0.32em").text(function(t){return(t.value/a*100).toFixed(1)+"% "+t.label})})}};