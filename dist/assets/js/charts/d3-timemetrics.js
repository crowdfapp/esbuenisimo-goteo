d3.goteo=d3.goteo||{},d3.goteo.timemetricsChart=function(e){var t=e&&e.width||600,i=e&&e.height||300,a=e&&e.title||"Time series",c=e&&e.description||"Show events in a timeline",o=e&&e.min_date,n=e&&e.max_date,l=e&&e.format||"%VALUE%",r=e&&e.field||"value";return console.log("settings",e),function(e){e.each(function(e){console.log("dataset",e);var s=this;MG.data_graphic({title:a,description:c,data:e,y_accessor:r,width:t,height:i,interpolate:d3.curveLinear,min_x:o,max_x:n,target:s,linked:!0,mouseover:function(e,t){var i=d3.timeFormat("%b %d, %Y")(e.date),a=l.replace("%VALUE%",e[r]).replace("%TOTAL%",e.count);d3.select(s).select("svg .mg-active-datapoint").text(i+"   "+a)}}),d3.select(s).select("svg").attr("width",null),d3.select(s).select("svg").attr("height",null),d3.select(s).select("svg").attr("viewBox","0 0 "+t+" "+i),d3.select(s).select("svg").attr("preserveAspectRatio","xMinYMin meet")})}};